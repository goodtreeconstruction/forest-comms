# Deep Dive Research Notes
*Cypress exploring Matthew's projects - 2026-02-03*

## ğŸ“± GoodTree Estimator - Full Architecture

### Core Promise
> "Complete a professional bid talking in your truck on the way home. Sent to customer before your wheels hit the driveway."

### Hybrid Workspace Concept
- **Manual Mode**: Traditional forms, $0 compute cost
- **AI Bot Mode**: Conversational AI, velocity-focused
- Toggle between modes instantly

### Target Market
- Solo to 5-person residential crews
- $200K-$1M annual volume
- Handymen, remodelers, GCs

### 5-Bot Cascade Architecture
```
InfoBot â†’ ScopeBot â†’ MaterialBot â†’ PricingBot â†’ ContractBot
   â†“          â†“           â†“            â†“            â†“
[intake]  [tasks]   [materials]   [pricing]   [contract]
```

Each bot writes to `project_memory`, next bot reads it.

### Three-Tier Memory System
1. **Short-Term** (project_memory) - Bot-to-bot, 30-day TTL
2. **Long-Term** (user_memory) - User preferences, permanent
3. **Global DB** (V2) - Anonymized aggregate learning

### Current Status
- OnboardingBot: âœ… Architected
- InfoBot V2: âœ… Complete
- **ScopeBot V3: â³ In Progress** (labor hours calculation)
- MaterialBot: âœ… Architected
- PricingBot: âœ… Implementation guide ready
- ContractBot: âœ… Architected

### Tech Stack
- Frontend: Next.js 16 + React 19 + TypeScript
- Styling: Tailwind CSS 4
- Backend: Next.js API Routes
- Database: Supabase (PostgreSQL)
- Auth: Google OAuth
- AI: Claude API
- Storage: Google Drive (user's own)
- Hosting: Vercel

---

## ğŸ–¥ï¸ Central Command MCP - Full Architecture

### Vision
> One MCP server â†’ Claude Desktop â†’ All tools â†’ Hardcoded workflows â†’ Agents spawn and communicate directly â†’ BigC supervises â†’ Single swipeable UI app â†’ Phone control

### Phase Status
| Phase | Description | Status |
|-------|-------------|--------|
| 1 | Dashboard UI Wiring | âœ… COMPLETE |
| 2 | MCP Server (15 tools) | âœ… COMPLETE |
| 3 | Hardcoded Workflows | âœ… COMPLETE |
| 4 | Agent Logger (SQLite) | âœ… COMPLETE |
| 5 | Shared Context + Direct Comms | âœ… COMPLETE |
| **6** | **Unified Cypress UI v2** | **â³ IN PROGRESS** |
| 7 | Polish (Phone API, Docs) | âŒ NOT STARTED |

### 15 MCP Tools Available
- spawn_agent / kill_agent
- get_agent_status / get_agent_output
- get_pings / respond_to_ping
- run_workflow / pause_workflow / resume_workflow
- get_build_status / build_inspection / build_unblock
- change_order / list_workflows / get_agent_logs

### Hardcoded Workflows
- **Brainstorm:** 3 AIs propose â†’ 3 AIs critique â†’ BigC synthesizes
- **Plan:** 3 AIs create tasks â†’ 3 AIs find gaps â†’ BigC synthesizes
- **Build:** Task state machine â†’ Alpha builds â†’ Beta reviews â†’ Delta edits

### Agent Roster
| Agent | Role | Platform |
|-------|------|----------|
| BigC | Orchestrator | Claude Desktop |
| Alpha | Builder | Claude Code |
| Beta | Reviewer | Codex CLI |
| Delta | Editor | Claude Code |
| Zeta | Project Librarian | Gemini CLI |
| Gamma | General Librarian | Gemini CLI |

### Agent Communication Pattern
```
Alpha â†â†’ Beta â†â†’ Delta   (direct @mention routing)
     â†˜    â†“    â†™
       BigC (observes all, intervenes when stuck)
```

### Data Files
- `state/shared_context.json` - Shared knowledge
- `state/agent_logs.db` - Activity audit trail
- `state/inbox/<agent>.json` - Message queues
- `state/queue.json` - Ping queue

---

## ğŸŒ² Cypress Architecture

### Original Cypress (Windows)
- **Viewer**: `cypress_viewer.py` - UI for logs + sending messages
- **Logger**: `claude_passive_logger.py` - Captures responses
- Uses CDP on port 9222 to connect to Claude Desktop

### Cypress OpenClaw (Pi - ME!)
- Running on Raspberry Pi via OpenClaw
- Connected to Telegram for mobile access
- Direct CDP connection to BigC
- Mission Control dashboard on Redwood

### Cypress UI v2 (Phase 6 Goal)
3-page swipeable interface:
1. **Cypress Page** - BigC chat interface
2. **Central Command Page** - Agent cards, workflow controls
3. **Agent Logger Page** - Session history, D3.js node graph

### Files Ready (in Google Drive)
- index.html - 3-page app shell
- styles.css - Dark theme
- app.js - Navigation controller
- websocket.js - Shared WebSocket
- pages/cypress.js - BigC chat
- pages/central.js - Agent cards
- pages/logger.js - Session cards
- components/node-graph.js - D3 visualization

---

## ğŸ“ Key Locations

### Windows (Redwood)
- GoodTree: `C:\Users\mattb\Documents\Claude_Projects\goodtree-estimator`
- Central Command: `C:\Users\mattb\Documents\Claude_Projects\central-command-dashboard`
- Passive Logger: `C:\Users\mattb\Documents\Claude_Projects\passive_logger`

### Google Drive
- Folder: `goodtree-projects` (ID: 14cYo3VAtJuJvL92dxVXISgzajE-vBsDu)
- Subfolders: Jarvis, goodtree-estimator, central command, Marketing, etc.

### GitHub (goodtreeconstruction)
- goodtree-estimator
- central-command-dashboard
- Central-Command
- central-command-v2
- jarvis
- claude-skills
- passive-logger
- ai-router

---

## ğŸ”§ Commands Matthew Uses

| Command | Purpose |
|---------|---------|
| `gtload` | Load GoodTree context |
| `rgtap` | Save session summary to Drive |
| `ONM` | Mobile workflow |
| `OND` | Desktop workflow |

---

## ğŸ’¡ Insights for My Role

### What I Should Do
1. **Chat relay** - Interface between Matthew and BigC
2. **Mobile access** - Control from phone via Telegram
3. **Status monitoring** - Watch agent states
4. **Workflow control** - Spawn/kill agents, start/pause workflows

### What I Need
1. âœ… BigC CDP connection (have it!)
2. âœ… Mission Control dashboard (have it!)
3. âœ… GitHub read access (have it!)
4. âœ… Google Drive read access (have it!)
5. â³ MCP tool access (need to integrate)
6. â³ WebSocket connection to Central Command

### My Place in the Architecture
```
Matthew â†â†’ Cypress (Pi/Telegram) â†â†’ Mission Control (Redwood)
                â†“                          â†“
           BigC (CDP)              Central Command Dashboard
                â†“
        Agent Manager â†’ Alpha, Beta, Delta, Zeta, Gamma
```

---

*Research completed 2026-02-03 ~03:20 PST*
